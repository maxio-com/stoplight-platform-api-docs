---
"/endpoints.json":
  post:
    summary: Create Endpoint
    tags:
    - Webhooks
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              type: object
              properties:
                endpoint:
                  "$ref": "#/components/schemas/Endpoint"
            examples:
              Example:
                value:
                  endpoint:
                    id: 1
                    url: https://your.site/webhooks
                    site_id: 1
                    status: enabled
                    webhook_subscriptions:
                    - payment_success
                    - payment_failure
      '422':
        description: Unprocessable Entity (WebDAV)
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: array
                  items:
                    type: string
              required:
              - errors
            examples:
              Example:
                value:
                  errors:
                  - 'URL: invalid, only http and https supported'
    operationId: createEndpoint
    description: |-
      The Chargify API allows you to create an endpoint and assign a list of webhooks subscriptions (events) to it.

      You can check available events here.
      [Event keys](https://maxio-chargify.zendesk.com/hc/en-us/articles/5405357509645-Webhooks-Reference#example-payloads)
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              endpoint:
                "$ref": "#/components/schemas/Create-or-Update-Endpoint"
            required:
            - endpoint
          examples:
            Example:
              value:
                endpoint:
                  url: https://your.site/webhooks
                  webhook_subscriptions:
                  - payment_success
                  - payment_failure
  get:
    summary: List Endpoints
    tags:
    - Webhooks
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              type: array
              items:
                "$ref": "#/components/schemas/Endpoint"
            examples:
              Example:
                value:
                - id: 11
                  url: https://foobar.com/webhooks
                  site_id: 1
                  status: enabled
                  webhook_subscriptions:
                  - payment_success
                  - payment_failure
                - id: 12
                  url: https:/example.com/webhooks
                  site_id: 1
                  status: enabled
                  webhook_subscriptions:
                  - payment_success
                  - payment_failure
                  - refund_failure
    operationId: listEndpoints
    description: This method returns created endpoints for site.
