openapi: 3.0.0
info:
  title: Chargify
  version: '1.0'
  contact:
    email: support@chargify.com
  description: Manage your company's subscriptions through the Chargify API.
tags:
  - name: Legacy Subscription Balance
paths:
  '/subscriptions/{subscription_id}/adjustments.json':
    parameters:
      - schema:
          type: string
        name: subscription_id
        in: path
        required: true
        description: The Chargify id of the subscription to which the adjustment applies
    post:
      summary: Create Adjustment
      tags:
        - Legacy Subscription Balance
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  adjustment:
                    type: object
                    properties:
                      id:
                        type: integer
                        description: The Chargify id of the adjustment
                      success:
                        type: boolean
                        description: 'Boolean indicating if the adjustment was successfully applied to the subscription balance. Note - At this time, this will always be true'
                      memo:
                        description: The supplied description of the adjustment
                        type: string
                        nullable: true
                      amount_in_cents:
                        type: integer
                        description: The amount of the adjustment represented in cents
                      starting_balance_in_cents:
                        type: integer
                        description: The subscription balance in cents before the adjustment applied
                      ending_balance_in_cents:
                        type: integer
                        description: The subscription balance in cents after the adjustment applied
                      type:
                        type: string
                        enum:
                          - Adjustment
                      kind:
                        type: string
                        nullable: true
                      transaction_type:
                        type: string
                        enum:
                          - adjustment
                      subscription_id:
                        type: integer
                        description: The Chargify id of the subscription associated with this adjustment
                      product_id:
                        type: integer
                        description: The Chargify id of the product associated with the subscription's at the time of the adjustment
                      component_id:
                        type: integer
                        nullable: true
                      component_handle:
                        type: string
                        nullable: true
                      component_price_point_id:
                        type: integer
                        nullable: true
                      component_price_point_handle:
                        type: string
                        nullable: true
                      statement_id:
                        type: integer
                        description: The Chargify id of the statement to which this adjustment was applied
                      customer_id:
                        type: integer
                        description: The Chargify id of the customer to which the subscription belongs
                      item_name:
                        type: string
                        nullable: true
                      currency:
                        type: string
                        description: The currency ISO code associated with the currency which was used to make the adjustment
                        enum:
                          - AUD
                          - BRL
                          - CAD
                          - CHF
                          - CNY
                          - CZK
                          - DKK
                          - EUR
                          - GBP
                          - HKD
                          - INR
                          - JPY
                          - MXN
                          - MYR
                          - NOK
                          - NZD
                          - PHP
                          - PLN
                          - RON
                          - RUB
                          - SEK
                          - SGD
                          - USD
                          - ZAR
                          - AED
                          - SAR
                          - ILS
                      exchange_rate:
                        type: integer
                      created_at:
                        type: string
                        description: The time that the adjustment was created
                      payment_id:
                        type: integer
                        nullable: true
                      period_range_start:
                        type: string
                        nullable: true
                        format: date
                        description: The start of the billing period for which the adjustment applies
                        example: '2021-04-02'
                      period_range_end:
                        type: string
                        nullable: true
                        format: date
                        description: The end of the billing period period for which the adjustment applies
                        example: '2021-04-02'
                      gateway_used:
                        type: string
                        nullable: true
                      gateway_transaction_id:
                        type: integer
                        nullable: true
                      gateway_order_id:
                        type: integer
                        nullable: true
                      tax_id:
                        type: integer
                        nullable: true
              examples:
                Example:
                  value:
                    adjustment:
                      id: 12345
                      subscription_id: 54321
                      type: Adjustment
                      kind: null
                      transaction_type: adjustment
                      success: true
                      amount_in_cents: 1000
                      memo: null
                      created_at: '2021-04-02T15:54:10-04:00'
                      starting_balance_in_cents: 8800
                      ending_balance_in_cents: 9800
                      gateway_used: null
                      gateway_transaction_id: null
                      gateway_order_id: null
                      payment_id: null
                      product_id: 98765
                      tax_id: null
                      component_id: null
                      statement_id: 56789
                      customer_id: 38921
                      item_name: null
                      period_range_start: '2021-04-02'
                      period_range_end: '2021-04-02'
                      currency: USD
                      exchange_rate: 1
                      component_handle: null
                      component_price_point_id: null
                      component_price_point_handle: null
        '422':
          description: Unprocessable Entity (WebDAV)
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: array
                    items:
                      type: string
              examples:
                Example:
                  value:
                    errors:
                      - 'Amount: is not a number.'
      operationId: post-subscriptions-subscriptionId-adjustments.json
      description: |-
        | ❗️  This endpoint is only for subscriptions using Legacy Statement Billing  |
        |-----------------------------------------------------------------------------|

        # Create Adjustment

        | Scenario 1 | To create an Adjustment on a Subscription to increase the balance by a certain dollar amount, include the following to your request: | `"amount":"4.00"`                                            |
        |------------|--------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
        | Scenario 2 | To increase the Subscription balance by a certain amount of cents, use the following attribute in your request:                      | `"amount_in_cents":100`                                      |
        | Scenario 3 | To decrease the Subscription balance by a certain dollar amount, the request must contain:                                           | `"amount":"-4.00"`                                           |
        | Scenario 4 | To decrease the Subscription balance by a certain amount of cents, use:                                                              | `"amount_in_cents":"-400"`                                   |
        | Scenario 5 | To set the Subscription balance to an exact dollar amount, include the following attributes to the request:                          | `"adjustment_method":"target", "amount":"100.00"`            |
        | Scenario 6 | To set the Subscription balance to an exact positive amount of cents, the request must contain the following attributes:             | `"adjustment_method":"target",` `"amount_in_cents":"10000"`  |
        | Scenario 7 | To set the Subscription balance to an exact negative amount of cents, use the following attributes in the request:                   | `"adjustment_method":"target",` `"amount_in_cents":"-10000"` |

        ## Help Documentation 

        Full documentation on how to record Adjustments in the Chargify UI can be located [here](http://help.chargify.com/subscriptions/adjustments.html). It goes into greater detail on how the user interface will react when applying adjustments.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                adjustment:
                  type: object
                  properties:
                    amount_in_cents:
                      oneOf:
                        - type: string
                          pattern: ^\d+$
                        - type: number
                      description: '(either amount or amount_in_cents is required) If you use this parameter, you should pass the amount represented as a number of cents. For example, $10.00 would be represented as 1000. If you pass a value for both amount and amount_in_cents, the value in amount_in_cents will be used and amount will be discarded.'
                    amount:
                      oneOf:
                        - type: string
                          pattern: '^[1-9]\d*(\.\d+)?$'
                        - type: number
                      description: '(either amount or amount_in_cents is required) If you use this parameter, you should pass a dollar amount represented as a string. For example, $10.00 would be represented as 10.00 and -$10.00 would be represented as -10.00.'
                    memo:
                      type: string
                      description: A helpful explanation for the adjustment. This amount will remind you and your customer for the reason for the assessment of the adjustment.
                      maxLength: 255
                    period_range_start:
                      type: string
                      description: 'A date range represents a service period. If a start is provided, an end must be supplied as well. These dates are optional and do not impact the billing of the charge. If provided, the date range will be used for revenue placement on the Finance Report and Revenue Recognition report.'
                      format: date
                    period_range_end:
                      type: string
                      description: 'A date range represents a service period. If an end is provided, a start must be supplied as well. These dates are optional and do not impact the billing of the charge. If provided, the date range will be used for revenue placement on the Finance Report and Revenue Recognition report.'
                      format: date
                    adjustment_method:
                      type: string
                      enum:
                        - target
                      description: 'A string that toggles how the adjustment should be applied. If target is passed for this param, the adjustment will automatically set the subscription’s balance to the amount. If left blank, the amount will be added to the current balance.'
                  required:
                    - amount_in_cents
  '/subscriptions/{subscription_id}/charges.json':
    parameters:
      - schema:
          type: integer
        name: subscription_id
        in: path
        required: true
        description: The Chargify id of the subscription to which the charge applies
    post:
      summary: Create Charge
      tags:
        - Legacy Subscription Balance
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  charge:
                    type: object
                    properties:
                      id:
                        type: integer
                      subscription_id:
                        type: integer
                      type:
                        type: string
                        enum:
                          - Charge
                      kind:
                        type: string
                        enum:
                          - one_time
                      transaction_type:
                        type: string
                        enum:
                          - charge
                      success:
                        description: 'The success of the charge. At this time, all charges that are returned will return true here'
                        type: boolean
                      amount_in_cents:
                        description: 'The amount of the charge and captured payment, represented in cents.'
                        type: integer
                      memo:
                        description: The supplied memo for the charge
                        type: string
                        nullable: true
                      created_at:
                        type: string
                        description: The time that the charge was created
                      starting_balance_in_cents:
                        type: integer
                        description: The subscription balance in cents before the charge was applied
                      ending_balance_in_cents:
                        type: integer
                        description: The subscription balance in cents after the charge was applied
                      gateway_used:
                        type: string
                        nullable: true
                      gateway_transaction_id:
                        type: integer
                        nullable: true
                      gateway_order_id:
                        type: integer
                        nullable: true
                      payment_id:
                        type: integer
                        nullable: true
                      product_id:
                        type: integer
                        nullable: true
                      price_point_id:
                        type: integer
                        nullable: true
                      price_point_handle:
                        type: string
                        nullable: true
                      tax_id:
                        type: integer
                        nullable: true
                      component_id:
                        type: integer
                        nullable: true
                      component_handle:
                        type: string
                        nullable: true
                      component_price_point_id:
                        type: integer
                        nullable: true
                      component_price_point_handle:
                        type: string
                        nullable: true
                      statement_id:
                        type: integer
                        nullable: true
                      customer_id:
                        type: integer
                        nullable: true
                      item_name:
                        type: string
                      period_range_start:
                        type: string
                        nullable: true
                      period_range_end:
                        type: string
                        nullable: true
                      currency:
                        type: string
                        enum:
                          - AUD
                          - BRL
                          - CAD
                          - CHF
                          - CNY
                          - CZK
                          - DKK
                          - EUR
                          - GBP
                          - HKD
                          - INR
                          - JPY
                          - MXN
                          - MYR
                          - NOK
                          - NZD
                          - PHP
                          - PLN
                          - RON
                          - RUB
                          - SEK
                          - SGD
                          - USD
                          - ZAR
                          - AED
                          - SAR
                          - ILS
                      exchange_rate:
                        type: integer
                      quantity:
                        type: string
                        enum:
                          - '1.0'
                      original_amount_in_cents:
                        type: integer
                      discount_amount_in_cents:
                        type: integer
                      taxable_amount_in_cents:
                        type: integer
                        nullable: true
                      taxations:
                        type: array
                        nullable: true
                        items:
                          type: object
                          properties:
                            tax_id:
                              type: integer
                            tax_charge_id:
                              type: integer
                            tax_name:
                              type: string
                            rate:
                              type: string
                            tax_amount_in_cents:
                              type: integer
                            tax_rules:
                              type: array
                              items:
                                type: object
                                properties:
                                  tax_rule_id:
                                    type: integer
                                  country_code:
                                    type: string
                                  subdivision_code:
                                    type: string
                                  rate:
                                    type: string
                                  tax_amount_in_cents:
                                    type: integer
                                  description:
                                    type: string
        '422':
          description: Unprocessable Entity (WebDAV)
          content:
            application/json:
              schema:
                type: object
                properties:
                  errors:
                    type: array
                    items:
                      type: string
              examples:
                Example:
                  value:
                    errors:
                      - 'Memo: cannot be blank.'
                      - This subscription is not eligible to accept charges.
      operationId: post-subscriptions-subscription_id-charges.json
      description: |-
        | ❗️  This endpoint is only for subscriptions using Legacy Statement Billing  |
        |-----------------------------------------------------------------------------|

        # Create Charge

        Creating a charge requires a valid, live subscription (i.e. subscriptions that are not canceled or expired). The subscription must be referenced by `subscription_id`.

        When a charge is created, a payment in the amount of the assessed charge is automatically captured from the credit card on file for the subscription. For this purpose, the subscription must have a payment method in order to support adding a charge. Payment collection will not be attempted if:

        + the subscription is on legacy invoice billing
        + the charge is accrued to the next renewal (`delay_capture` = true)

        ## Limitations of attribute combinations

        When you add a charge to an existing subscription, you may not use the following combination of attribute values:

        + `delay_capture` = true
        + `accrue_on_failure` = true

        ## Help Documentation

        This method of recording a charge against a subscription is referred to as a **"One-time Charge"** in the Chargify Help Documentation.

        Full documentation on how to record a One-time Charge in the Chargify UI can be located [here](https://help.chargify.com/subscriptions/one-time-charges.html).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                charge:
                  type: object
                  properties:
                    amount_in_cents:
                      description: '(either amount or amount_in_cents is required) If you use this parameter, you should pass the amount represented as a number of cents, either as a string or integer. For example, $10.00 would be represented as 1000. If you pass a value for both amount and amount_in_cents, the value in amount_in_cents will be used and amount will be discarded.'
                      oneOf:
                        - type: string
                          pattern: ^\d+$
                        - type: number
                    memo:
                      description: A helpful explanation for the charge. This amount will remind you and your customer for the reason for the assessment of the charge.
                      type: string
                    amount:
                      description: '(either amount or amount_in_cents is required) If you use this parameter, you should pass a dollar amount represented as a string. For example, $10.00 would be represented as 10.00.'
                      oneOf:
                        - type: string
                          pattern: '^[1-9]\d*(\.\d+)?$'
                        - type: number
                    accrue_on_failure:
                      description: 'If true, the charge will be added to the subscription whether or not the payment succeeds. If false, only the failed payment will be recorded, and the balance will not be increased. This attribute is ignored if delay_capture is true.'
                      default: false
                      oneOf:
                        - type: boolean
                        - type: integer
                          enum:
                            - 0
                            - 1
                        - type: string
                          enum:
                            - '0'
                            - '1'
                    delay_capture:
                      description: 'If true, Chargify does not attempt to immediately capture a payment for this charge (instead, wait until the next assessment date). Note if this option is used use_negative_balance is assumed as false.'
                      oneOf:
                        - type: boolean
                        - type: integer
                          enum:
                            - 0
                            - 1
                        - type: string
                          enum:
                            - '0'
                            - '1'
                    taxable:
                      description: 'If true, taxes will be assessed on the charge.'
                      default: false
                      oneOf:
                        - type: boolean
                        - type: integer
                          enum:
                            - 0
                            - 1
                        - type: string
                          enum:
                            - '0'
                            - '1'
                    payment_collection_method:
                      type: string
                      description: '(for subscriptions using legacy invoice billing only) When delay_capture is set to false, and payment_collection_method is set to invoice, a mid-period invoice will be created from this charge. The charge will not appear on the invoice created at the next renewal'
                      default: automatic
                      enum:
                        - automatic
                        - invoice
                    period_range_start:
                      description: 'A date range represents a service period. If a start is provided, an end must be supplied as well. These dates are optional and do not impact the billing of the charge. If provided, the date range will be used for revenue placement on the Finance Report and Revenue Recognition report.'
                      type: string
                    period_range_end:
                      description: 'A date range represents a service period. If an end is provided, a start must be supplied as well. These dates are optional and do not impact the billing of the charge. If provided, the date range will be used for revenue placement on the Finance Report and Revenue Recognition report.'
                      type: string
                    use_negative_balance:
                      description: 'This option specifies whether or not a negative current balance should be used when creating the new charge. If true, use the negative balance on the subscription to calculate the charge. If false, do not use the negative balance.'
                      oneOf:
                        - type: boolean
                        - type: integer
                          enum:
                            - 0
                            - 1
                        - type: string
                          enum:
                            - '0'
                            - '1'
                  required:
                    - amount_in_cents
                    - memo
            examples:
              Example:
                value:
                  charge:
                    id: 3944471
                    subscription_id: 108287
                    type: Charge
                    kind: one_time
                    transaction_type: charge
                    success: true
                    amount_in_cents: 1000
                    memo: Upcharge
                    created_at: '2021-04-02T17:52:09-04:00'
                    starting_balance_in_cents: -7486
                    ending_balance_in_cents: -6486
                    gateway_used: null
                    gateway_transaction_id: null
                    gateway_order_id: null
                    payment_id: 3944472
                    product_id: 7580
                    tax_id: null
                    component_id: null
                    statement_id: 1220246
                    customer_id: 171137
                    item_name: prod_10430
                    period_range_start: '2021-04-02'
                    period_range_end: '2021-04-02'
                    currency: USD
                    exchange_rate: 1
                    component_handle: null
                    component_price_point_id: null
                    component_price_point_handle: null
                    quantity: '1.0'
                    original_amount_in_cents: 1000
                    discount_amount_in_cents: 0
                    taxable_amount_in_cents: null
                    price_point_id: null
                    price_point_handle: null
                    taxations: []
  '/subscriptions/{subscription_id}/payments.json':
    parameters:
      - schema:
          type: integer
        name: subscription_id
        in: path
        required: true
        description: The Chargify id of the subscription to which the payment applies
    post:
      summary: Create Payment
      tags:
        - Legacy Subscription Balance
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  payment:
                    type: object
                    properties:
                      id:
                        type: integer
                      subscription_id:
                        type: integer
                      type:
                        type: string
                        enum:
                          - Payment
                      kind:
                        type: string
                        enum:
                          - manual
                      transaction_type:
                        type: string
                        enum:
                          - payment
                      success:
                        type: boolean
                      amount_in_cents:
                        type: integer
                      memo:
                        type: string
                        nullable: true
                      created_at:
                        type: string
                      starting_balance_in_cents:
                        type: integer
                      ending_balance_in_cents:
                        type: integer
                      gateway_used:
                        type: string
                        nullable: true
                      gateway_transaction_id:
                        type: integer
                        nullable: true
                      gateway_order_id:
                        type: integer
                        nullable: true
                      payment_id:
                        type: integer
                        nullable: true
                      product_id:
                        type: integer
                        nullable: true
                      tax_id:
                        type: integer
                        nullable: true
                      component_id:
                        type: integer
                        nullable: true
                      statement_id:
                        type: integer
                      customer_id:
                        type: integer
                      item_name:
                        type: string
                        nullable: true
                      period_range_start:
                        type: string
                        nullable: true
                      period_range_end:
                        type: string
                        nullable: true
                      currency:
                        type: string
                      exchange_rate:
                        type: number
                      component_handle:
                        type: string
                        nullable: true
                      component_price_point_id:
                        type: integer
                        nullable: true
                      component_price_point_handle:
                        type: string
                        nullable: true
                      parent_id:
                        type: integer
                        nullable: true
                      role:
                        type: string
                        nullable: true
                      card_number:
                        type: string
                        nullable: true
                      card_expiration:
                        type: string
                        nullable: true
                      card_type:
                        type: string
                        nullable: true
                      refunded_amount_in_cents:
                        type: integer
        '422':
          description: Unprocessable Entity (WebDAV)
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  errors:
                    type: object
              examples:
                Example:
                  value:
                    errors:
                      amount_in_cents:
                        - 'Amount: is not a number.'
      operationId: post-subscriptions-subscription_id-payments.json
      description: |-
        | ❗️  This endpoint is only for subscriptions using Legacy Statement Billing |
        |---------------------------------------------------------------------------|

        ## External Payments

        Chargify allows you to record payments that occur **outside** of the normal flow of payment processing.
        These payments are considered **external payments**. A common case to apply such a payment is when a customer pays by check or some other means for their subscription.

        Full documentation on how to record external payments in the Chargify UI can be located [here](http://help.chargify.com/subscriptions/subscription-actions.html#record-external-payment).
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                payment:
                  type: object
                  properties:
                    amount_in_cents:
                      oneOf:
                        - type: string
                          pattern: ^\d+$
                        - type: number
                      description: '(either amount or amount_in_cents is required) If you use this parameter, you should pass the amount represented as a number of cents. For example, $10.00 would be represented as 1000. If you pass a value for both amount and amount_in_cents, the value in amount_in_cents will be used and amount will be discarded.'
                    amount:
                      oneOf:
                        - type: string
                          pattern: '^[1-9]\d*(\.\d+)?$'
                        - type: number
                      description: '(either amount or amount_in_cents is required) If you use this parameter, you should pass a dollar amount represented as a string. For example, $10.00 would be represented as 10.00.'
                    memo:
                      type: string
                      description: Typically the description of why the payment occured
                  required:
                    - amount_in_cents
components:
  schemas: {}
servers:
  - url: 'https://subdomain.chargify.com'
    description: ''
