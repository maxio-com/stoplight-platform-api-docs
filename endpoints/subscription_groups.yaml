---
"/subscription_groups/signup.json":
  post:
    operationId: signupWithSubscriptionGroup
    summary: Subscription Group Signup
    description: |-
      Create multiple subscriptions at once under the same customer and consolidate them into a subscription group.

      You must provide one and only one of the `payer_id`/`payer_reference`/`payer_attributes` for the customer attached to the group.

      You must provide one and only one of the `payment_profile_id`/`credit_card_attributes`/`bank_account_attributes` for the payment profile attached to the group.

      Only one of the `subscriptions` can have `"primary": true` attribute set.

      When passing product to a subscription you can use either `product_id` or `product_handle` or `offer_id`. You can also use `custom_price` instead.
    tags:
    - Subscription Groups
    responses:
      '201':
        description: Created
        headers: {}
        content:
          application/json:
            schema:
              type: object
              properties:
                uid:
                  type: string
                scheme:
                  type: integer
                customer_id:
                  type: integer
                payment_profile_id:
                  type: integer
                subscription_ids:
                  type: array
                  items:
                    type: integer
                primary_subscription_id:
                  type: integer
                next_assessment_at:
                  type: string
                state:
                  type: string
                cancel_at_end_of_period:
                  type: boolean
                subscriptions:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: integer
                      reference:
                        type:
                        - string
                        - 'null'
                      product_id:
                        type: integer
                      product_handle:
                        type:
                        - 'null'
                        - string
                      product_price_point_id:
                        type: integer
                      product_price_point_handle:
                        type: string
                      currency:
                        type: string
                      coupon_code:
                        type:
                        - string
                        - 'null'
                      total_revenue_in_cents:
                        type: integer
                      balance_in_cents:
                        type: integer
                payment_collection_method:
                  type: string
                  enum:
                  - remittance
                  - automatic
      '422':
        description: Unprocessable Entity (WebDAV)
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: object
                  properties:
                    customer:
                      type: object
                    payment_profile:
                      type: object
                    subscriptions:
                      type: object
              required:
              - errors
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              subscription_group:
                type: object
                required:
                - subscriptions
                properties:
                  payment_profile_id:
                    type: integer
                  payer_id:
                    type: integer
                  payer_reference:
                    type: string
                  payment_collection_method:
                    type: string
                    enum:
                    - automatic
                    - remittance
                    default: automatic
                  payer_attributes:
                    type: object
                    properties:
                      first_name:
                        type: string
                      last_name:
                        type: string
                      email:
                        type: string
                      cc_emails:
                        type: string
                      organization:
                        type: string
                      reference:
                        type: string
                      address:
                        type: string
                      address_2:
                        type: string
                      city:
                        type: string
                      state:
                        type: string
                      zip:
                        type: string
                      country:
                        type: string
                      phone:
                        type: string
                      locale:
                        type: string
                      vat_number:
                        type: string
                      tax_exempt:
                        type: string
                      tax_exempt_reason:
                        type: string
                      metafields:
                        type: object
                  credit_card_attributes:
                    type: object
                    properties:
                      full_number:
                        type:
                        - string
                        - integer
                        example: 4111111111111111
                      expiration_month:
                        type:
                        - string
                        - integer
                      expiration_year:
                        type:
                        - string
                        - integer
                      chargify_token:
                        type: string
                        example: tok_592nf92ng0sjd4300p
                      vault_token:
                        type: string
                      current_vault:
                        type: string
                      gateway_handle:
                        type: string
                      first_name:
                        type: string
                      last_name:
                        type: string
                      billing_address:
                        type: string
                      billing_address_2:
                        type: string
                      billing_city:
                        type: string
                      billing_state:
                        type: string
                      billing_zip:
                        type: string
                      billing_country:
                        type: string
                      last_four:
                        type: string
                      card_type:
                        type: string
                        example: visa
                      customer_vault_token:
                        type: string
                      cvv:
                        type: string
                      payment_type:
                        type: string
                  bank_account_attributes:
                    type: object
                    properties:
                      bank_name:
                        type: string
                        description: "(Required when creating a subscription with
                          ACH or GoCardless) The name of the bank where the customer’s
                          account resides"
                      bank_account_number:
                        type: string
                        description: "(Required when creating a subscription with
                          ACH. Required when creating a subscription with GoCardless
                          and bank_iban is blank) The customerʼs bank account number"
                      bank_routing_number:
                        type: string
                        description: "(Required when creating a subscription with
                          ACH. Optional when creating a subscription with GoCardless).
                          The routing number of the bank. It becomes bank_code while
                          passing via GoCardless API"
                      bank_iban:
                        type: string
                        description: "(Optional when creating a subscription with
                          GoCardless). International Bank Account Number. Alternatively,
                          local bank details can be provided"
                      bank_branch_code:
                        type: string
                        description: "(Optional when creating a subscription with
                          GoCardless) Branch code. Alternatively, an IBAN can be provided"
                      bank_account_type:
                        type: string
                        enum:
                        - checking
                        - savings
                        default: checking
                      bank_account_holder_type:
                        type: string
                        enum:
                        - personal
                        - business
                        default: personal
                      payment_type:
                        type: string
                      billing_address:
                        type: string
                      billing_city:
                        type: string
                      billing_state:
                        type: string
                      billing_zip:
                        type: string
                      billing_country:
                        type: string
                      chargify_token:
                        type: string
                      current_vault:
                        type: string
                      gateway_handle:
                        type: string
                  subscriptions:
                    type: array
                    items:
                      type: object
                      properties:
                        product_handle:
                          type: string
                          description: The API Handle of the product for which you
                            are creating a subscription. Required, unless a `product_id`
                            is given instead.
                        product_id:
                          type: integer
                          description: The Product ID of the product for which you
                            are creating a subscription. You can pass either `product_id`
                            or `product_handle`.
                        product_price_point_id:
                          type: integer
                          description: The ID of the particular price point on the
                            product.
                        product_price_point_handle:
                          type: string
                          description: The user-friendly API handle of a product's
                            particular price point.
                        offer_id:
                          type: integer
                          description: Use in place of passing product and component
                            information to set up the subscription with an existing
                            offer. May be either the Chargify ID of the offer or its
                            handle prefixed with `handle:`
                        reference:
                          type: string
                          description: The reference value (provided by your app)
                            for the subscription itelf.
                        primary:
                          type: boolean
                          description: One of the subscriptions must be marked as
                            primary in the group.
                        currency:
                          type: string
                          description: "(Optional) If Multi-Currency is enabled and
                            the currency is configured in Chargify, pass it at signup
                            to create a subscription on a non-default currency. Note
                            that you cannot update the currency of an existing subscription."
                        coupon_codes:
                          type: array
                          description: An array for all the coupons attached to the
                            subscription.
                          items:
                            type: string
                        components:
                          type: array
                          items:
                            type: object
                            properties:
                              component_id:
                                type:
                                - string
                                - integer
                                description: Required if passing any component to
                                  `components` attribute.
                              allocated_quantity:
                                type:
                                - string
                                - integer
                              unit_balance:
                                type:
                                - string
                                - integer
                              price_point_id:
                                type:
                                - string
                                - integer
                              custom_price:
                                type: object
                                description: Used in place of `price_point_id` to
                                  define a custom price point unique to the subscription.
                                  You still need to provide `component_id`.
                                properties:
                                  pricing_scheme:
                                    type: string
                                    enum:
                                    - per_unit
                                    - stairstep
                                    - volume
                                    - tiered
                                  prices:
                                    type: array
                                    items:
                                      type: object
                                      properties:
                                        unit_price:
                                          type: string
                                        starting_quantity:
                                          type: string
                                        ending_quantity:
                                          type: string
                                  overage_pricing:
                                    type: array
                                    items:
                                      type: object
                                      properties:
                                        pricing_scheme:
                                          type: string
                                          enum:
                                          - per_unit
                                          - stairstep
                                          - volume
                                          - tiered
                                        prices:
                                          type: array
                                          items:
                                            type: object
                                            properties:
                                              unit_price:
                                                type: string
                                              starting_quantity:
                                                type: string
                                              ending_quantity:
                                                type: string
                        custom_price:
                          type: object
                          description: Used in place of `product_price_point_id` to
                            define a custom price point unique to the subscription.
                            You still need to pass `product_id` or `product_handle`.
                          properties:
                            name:
                              type: string
                            handle:
                              type: string
                            price_in_cents:
                              type:
                              - string
                              - integer
                              description: Required if using `custom_price` attribute.
                            interval:
                              type:
                              - string
                              - integer
                              description: Required if using `custom_price` attribute.
                            interval_unit:
                              schema:
                                "$ref": "#/components/schemas/Interval-Unit"
                              description: Required if using `custom_price` attribute.
                            trial_price_in_cents:
                              type:
                              - string
                              - integer
                            trial_interval:
                              type:
                              - string
                              - integer
                            trial_interval_unit:
                              schema:
                                "$ref": "#/components/schemas/Interval-Unit"
                            initial_charge_in_cents:
                              type:
                              - string
                              - integer
                            initial_charge_after_trial:
                              type: boolean
                            expiration_interval:
                              type:
                              - string
                              - integer
                            expiration_interval_unit:
                              schema:
                                "$ref": "#/components/schemas/Interval-Unit"
                            tax_included:
                              type: boolean
                        calendar_billing:
                          type: object
                          properties:
                            snap_day:
                              type: string
                              description: A day of month that subscription will be
                                processed on. Can be 1 up to 28 or 'end'.
                            calendar_billing_first_charge:
                              type: string
                              enum:
                              - prorated
                              - immediate
                              - delayed
                        metafields:
                          type: object
            required:
            - subscription_group
          examples:
            Basic request:
              value:
                subscription_group:
                  payment_profile_id: 123
                  payer_id: 123
                  subscriptions:
                  - product_id: 11
                    primary: true
                  - product_id: 12
                  - product_id: 13
            Create customer and payment profile in-place:
              value:
                subscription_group:
                  payer_attributes:
                    first_name: John
                    last_name: Doe
                    email: john@example.com
                    organization: Acme, Inc
                  credit_card_attributes:
                    full_number: '4111111111111111'
                    expiration_month: '12'
                    expiration_year: '2031'
                  subscriptions:
                  - product_id: 123
                    primary: true
                  - product_handle: silver-plan
                  - product_id: 124
            Create credit card using Chargify.js token:
              value:
                subscription_group:
                  payer_id: 123
                  credit_card_attributes:
                    chargify_token: tok_19gnjsa9433u9b22
                    last_four: '1111'
                    card_type: visa
                  subscriptions:
                  - product_id: 11
                    primary: true
                  - product_id: 12
                  - product_id: 13
            Create bank account using Chargify.js token:
              value:
                subscription_group:
                  payer_id: 234
                  bank_account_attributes:
                    chargify_token: tok_19gnjsa9433u9b22
                  subscriptions:
                  - product_id: 11
                    primary: true
                  - product_id: 12
                  - product_id: 13
            Create group with subscription and customer metafields:
              value:
                subscription_group:
                  payer_attributes:
                    first_name: John
                    last_name: Doe
                    email: john@example.com
                    organization: Acme, Inc
                    metafields:
                      win-over: ABCompany
                  credit_card_attributes:
                    full_number: '4111111111111111'
                    expiration_month: '12'
                    expiration_year: '2031'
                  subscriptions:
                  - product_id: 123
                    primary: true
                    metfields:
                      mrr: "$99"
                      discounted: false
                  - product_handle: silver-plan
                    metafields:
                      mrr: "$49"
                  - product_id: 124
            Create subscription with components:
              value:
                subscription_group:
                  payment_profile_id: 123
                  payer_id: 123
                  subscriptions:
                  - product_id: 11
                    primary: true
                    components:
                    - component_id: 99
                      allocated_quantity: 10
                  - product_id: 12
                  - product_id: 13
            Create subscription with Custom Pricing:
              value:
                subscription_group:
                  payment_profile_id: 123
                  payer_id: 123
                  subscriptions:
                  - product_id: 19
                    custom_pricing:
                      handle: custom-price
                      price_in_cents: 9900
                      interval: 1
                      interval_unit: month
                    primary: true
                  - product_id: 12
                    components:
                    - component_id: 29
                      allocated_quantity: 5
                      custom_pricing:
                        pricing_scheme: volume
                        prices:
                        - unit_price: '5'
                          starting_quantity: '1'
                          ending_quantity: '15'
                        - unit_price: '2'
                          starting_quantity: '16'
                  - product_id: 13
  parameters: []
"/subscription_groups/{uid}.json":
  parameters:
  - schema:
      type: string
    name: uid
    in: path
    required: true
    description: The uid of the subscription group
  get:
    summary: Read Subscription Group
    tags:
    - Subscription Groups
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              type: object
              properties:
                uid:
                  type: string
                scheme:
                  type: integer
                customer_id:
                  type: integer
                payment_profile_id:
                  type: integer
                subscription_ids:
                  type: array
                  items:
                    type: integer
                primary_subscription_id:
                  type: integer
                next_assessment_at:
                  type: string
                state:
                  type: string
                cancel_at_end_of_period:
                  type: boolean
                current_billing_amount_in_cents:
                  type: integer
                customer:
                  type: object
                  properties:
                    first_name:
                      type: string
                    last_name:
                      type: string
                    organization:
                      type: string
                    email:
                      type: string
                    reference:
                      type: string
                account_balances:
                  type: object
                  properties:
                    prepayments:
                      type: object
                      properties:
                        balance_in_cents:
                          type: integer
                    service_credits:
                      type: object
                      properties:
                        balance_in_cents:
                          type: integer
                    open_invoices:
                      type: object
                      properties:
                        balance_in_cents:
                          type: integer
                    pending_discounts:
                      type: object
                      properties:
                        balance_in_cents:
                          type: integer
            examples:
              Example:
                value:
                  uid: grp_939ktzq8v4477
                  scheme: 1
                  customer_id: 400
                  payment_profile_id: 567
                  subscription_ids:
                  - 101
                  - 102
                  - 103
                  primary_subscription_id: 101
                  next_assessment_at: '2020-08-01T14:00:00-05:00'
                  state: active
                  cancel_at_end_of_period: false
                  current_billing_amount_in_cents: 11500
                  customer:
                    first_name: Mark
                    last_name: Wannabewahlberg
                    organization: The Funky Bunch
                    email: markymark@example.com
                    reference: 4c92223b-bc16-4d0d-87ff-b177a89a2655
                  account_balances:
                    prepayments:
                      balance_in_cents: 0
                    service_credits:
                      balance_in_cents: 0
                    open_invoices:
                      balance_in_cents: 4400
                    pending_discounts:
                      balance_in_cents: 0
    operationId: readSubscriptionGroup
    description: |-
      Use this endpoint to find subscription group details.

      #### Current Billing Amount in Cents

      Current billing amount for the subscription group is not returned by default. If this information is desired, the `include[]=current_billing_amount_in_cents` parameter must be provided with the request.
  put:
    summary: Update Subscription Group
    tags:
    - Subscription Groups
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/Update-Subscription-Group-Response"
            examples:
              Example:
                value:
                  subscription_group:
                  customer_id: 1
                  payment_profile:
                    id: 1
                    first_name: t
                    last_name: t
                    masked_card_number: XXXX-XXXX-XXXX-1
                  payment_collection_method: automatic
                  subscription_ids:
                  - 1
                  created_at: '2021-01-21T05:47:38-05:00'
      '422':
        description: Unprocessable Entity (WebDAV)
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: object
                  properties:
                    members:
                      type: array
                      items:
                        type: object
                        properties:
                          id:
                            type: integer
                          type:
                            type: string
                          message:
                            type: string
            examples:
              Example:
                value:
                  errors:
                    members:
                    - id: 10101
                      type: not_found
                      message: Subscription could not be found
    operationId: updateSubscriptionGroupMembers
    description: |-
      Use this endpoint to update subscription group members.
      `"member_ids": []` should contain an array of both subscription IDs to set as group members and subscription IDs already present in the groups. Not including them will result in removing them from subscription group. To clean up members, just leave the array empty.
    requestBody:
      content:
        application/json:
          schema:
            "$ref": "#/components/schemas/Update-Subscription-Group-Request"
          examples:
            Example:
              value:
                subscription_group:
                  member_ids:
                  - 1
                  - 2
                  - 3
  delete:
    summary: Delete Subscription Group
    tags:
    - Subscription Groups
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              type: object
              properties:
                uid:
                  type: string
                deleted:
                  type: boolean
            examples:
              Example:
                value:
                  uid: grp_99w5xp9y5xycy
                  deleted: true
      '404':
        description: Not Found
    operationId: deleteSubscriptionGroup
    description: |-
      Use this endpoint to delete subscription group.
      Only groups without members can be deleted
"/subscription_groups/lookup.json":
  get:
    summary: Find Subscription Group
    tags:
    - Subscription Groups
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              type: object
              properties:
                uid:
                  type: string
                scheme:
                  type: integer
                customer_id:
                  type: integer
                payment_profile_id:
                  type: integer
                subscription_ids:
                  type: array
                  items:
                    type: integer
                primary_subscription_id:
                  type: integer
                next_assessment_at:
                  type: string
                state:
                  type: string
                cancel_at_end_of_period:
                  type: boolean
                customer:
                  type: object
                  properties:
                    first_name:
                      type: string
                    last_name:
                      type: string
                    organization:
                      type: string
                    email:
                      type: string
                    reference:
                      type: string
                account_balances:
                  type: object
                  properties:
                    prepayments:
                      type: object
                      properties:
                        balance_in_cents:
                          type: integer
                    service_credits:
                      type: object
                      properties:
                        balance_in_cents:
                          type: integer
                    open_invoices:
                      type: object
                      properties:
                        balance_in_cents:
                          type: integer
                    pending_discounts:
                      type: object
                      properties:
                        balance_in_cents:
                          type: integer
            examples:
              Example:
                value:
                  uid: grp_939ktzq8v4477
                  scheme: 1
                  customer_id: 400
                  payment_profile_id: 567
                  subscription_ids:
                  - 101
                  - 102
                  - 103
                  primary_subscription_id: 101
                  next_assessment_at: '2020-08-01T14:00:00-05:00'
                  state: active
                  cancel_at_end_of_period: false
                  customer:
                    first_name: Mark
                    last_name: Wannabewahlberg
                    organization: The Funky Bunch
                    email: markymark@example.com
                    reference: 4c92223b-bc16-4d0d-87ff-b177a89a2655
                  account_balances:
                    prepayments:
                      balance_in_cents: 0
                    service_credits:
                      balance_in_cents: 0
                    open_invoices:
                      balance_in_cents: 4400
                    pending_discounts:
                      balance_in_cents: 0
      '404':
        description: Not Found
    operationId: readSubscriptionGroupBySubscriptionId
    description: |-
      Use this endpoint to find subscription group associated with subscription.

      If the subscription is not in a group endpoint will return 404 code.
    parameters:
    - schema:
        type: string
      in: query
      name: subscription_id
      required: true
      description: The Chargify id of the subscription associated with the subscription
        group
"/subscription_groups/{uid}/cancel.json":
  parameters:
  - schema:
      type: string
    name: uid
    in: path
    required: true
    description: The uid of the subscription group
  post:
    summary: Cancel Grouped Subscriptions
    tags:
    - Subscription Group Status
    responses:
      '200':
        description: OK
      '422':
        description: Unprocessable Entity (WebDAV)
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: array
                  items:
                    type: string
            examples:
              Example:
                value:
                  errors:
                  - One or more subscriptions are not on automatic billing
    operationId: cancelSubscriptionsInGroup
    description: |-
      This endpoint will immediately cancel all subscriptions within the specified group. The group is identified by it's `uid` passed in the URL. To successfully cancel the group, the primary subscription must be on automatic billing. The group members as well must be on automatic billing or they must be prepaid.

      In order to cancel a subscription group while also charging for any unbilled usage on metered or prepaid components, the `charge_unbilled_usage=true` parameter must be included in the request.
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              charge_unbilled_usage:
                type: boolean
          examples:
            Example:
              value:
                charge_unbilled_usage: true
"/subscription_groups/{uid}/delayed_cancel.json":
  parameters:
  - schema:
      type: string
    name: uid
    in: path
    required: true
    description: The uid of the subscription group
  post:
    summary: Initiate Delayed Group Cancellation
    tags:
    - Subscription Group Status
    responses:
      '200':
        description: OK
      '422':
        description: Unprocessable Entity (WebDAV)
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: array
                  items:
                    type: string
            examples:
              Example:
                value:
                  errors:
                  - Subscriptions group is in a past due state
    operationId: initiateDelayedCancellationForGroup
    description: |-
      This endpoint will schedule all subscriptions within the specified group to be canceled at the end of their billing period. The group is identified by it's uid passed in the URL.

      All subscriptions in the group must be on automatic billing in order to successfully cancel them, and the group must not be in a "past_due" state.
  delete:
    summary: Cancel Delayed Group Cancellation
    tags:
    - Subscription Group Status
    responses:
      '200':
        description: OK
      '422':
        description: Unprocessable Entity (WebDAV)
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: array
                  items:
                    type: string
            examples:
              Example:
                value:
                  errors:
                  - Subscriptions group does not have a pending delayed cancellation
    operationId: stopDelayedCancellationForGroup
    description: Removing the delayed cancellation on a subscription group will ensure
      that the subscriptions do not get canceled at the end of the period. The request
      will reset the `cancel_at_end_of_period` flag to false on each member in the
      group.
"/subscription_groups/{subscription_group_uid}/reactivate.json":
  parameters:
  - schema:
      type: string
    name: subscription_group_uid
    in: path
    required: true
    description: The uid of the subscription group
  post:
    summary: Reactivate / Resume Subscription Group
    tags:
    - Subscription Group Status
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              type: object
              properties:
                uid:
                  type: string
                scheme:
                  type: integer
                customer_id:
                  type: integer
                payment_profile_id:
                  type: integer
                subscription_ids:
                  type: array
                  items:
                    type: integer
                primary_subscription_id:
                  type: integer
                next_assessment_at:
                  type: string
                state:
                  type: string
                cancel_at_end_of_period:
                  type: boolean
            examples:
              Example:
                value:
                  uid: grp_93wgm89cbjkw6
                  scheme: 1
                  customer_id: 1
                  payment_profile_id: 1
                  subscription_ids:
                  - 1
                  - 2
                  primary_subscription_id: 1
                  next_assessment_at: '2020-06-18T12:00:00-04:00'
                  state: active
                  cancel_at_end_of_period: false
      '422':
        description: Unprocessable Entity (WebDAV)
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: array
                  items:
                    type: string
            examples:
              Example:
                value:
                  errors:
                  - Must be inside the current billing period to resume this subscription
                    group
    operationId: reactivateSubscriptionGroup
    description: |-
      This endpoint will attempt to reactivate or resume a cancelled subscription group. Upon reactivation, any canceled invoices created after the beginning of the primary subscription's billing period will be reopened and payment will be attempted on them. If the subscription group is being reactivated (as opposed to resumed), new charges will also be assessed for the new billing period.

      Whether a subscription group is reactivated (a new billing period is created) or resumed (the current billing period is respected) will depend on the parameters that are sent with the request as well as the date of the request relative to the primary subscription's period.

      ## Reactivating within the current period

      If a subscription group is cancelled and reactivated within the primary subscription's current period, we can choose to either start a new billing period or maintain the existing one. If we want to maintain the existing billing period the `resume=true` option must be passed in request parameters.

      An exception to the above are subscriptions that are on calendar billing. These subscriptions cannot be reactivated within the current period. If the `resume=true` option is not passed the request will return an error.

      The `resume_members` option is ignored in this case. All eligible group members will be automatically resumed.


      ## Reactivating beyond the current period

      In this case, a subscription group can only be reactivated with a new billing period. If the `resume=true` option is passed it will be ignored.

      Member subscriptions can have billing periods that are longer than the primary (e.g. a monthly primary with annual group members). If the primary subscription in a group cannot be reactivated within the current period, but other group members can be, passing `resume_members=true` will resume the existing billing period for eligible group members. The primary subscription will begin a new billing period.

      For calendar billing subscriptions, the new billing period created will be a partial one, spanning from the date of reactivation to the next corresponding calendar renewal date.
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              resume:
                type: boolean
              resume_members:
                type: boolean
          examples:
            Example:
              value:
                resume: true
"/subscription_groups/{subscription_group_uid}/payment_profiles/{payment_profile_id}.json":
  parameters:
  - schema:
      type: string
    name: subscription_group_uid
    in: path
    required: true
    description: The uid of the subscription group
  - schema:
      type: integer
    name: payment_profile_id
    in: path
    required: true
    description: The Chargify id of the payment profile
  delete:
    summary: Delete Subscription Group Payment Profile
    responses:
      '204':
        description: No Content
    operationId: deleteSubscriptionGroupPaymentProfile
    description: |-
      This will delete a Payment Profile belonging to a Subscription Group.

      **Note**: If the Payment Profile belongs to multiple Subscription Groups and/or Subscriptions, it will be removed from all of them.
    tags:
    - Payment Profiles
"/subscription_groups/{uid}/prepayments.json":
  parameters:
  - schema:
      type: string
    name: uid
    in: path
    required: true
    description: The uid of the subscription group
  post:
    summary: Create Prepayment
    tags:
    - Subscription Group Invoice Account
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                amount_in_cents:
                  type: integer
                  description: The amount in cents of the entry.
                ending_balance_in_cents:
                  type: integer
                  description: The ending balance in cents of the account.
                entry_type:
                  type: string
                  description: The type of account entry
                  enum:
                  - Credit
                  - Debit
                memo:
                  type: string
                  description: 'A memo attached to the entry.

                    '
            examples:
              Example:
                value:
                  id: 6049554
                  amount_in_cents: 10000
                  ending_balance_in_cents: 5000
                  entry_type: Debit
                  memo: Debit from invoice account.
      '422':
        description: Unprocessable Entity (WebDAV)
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: array
                  items:
                    type: string
            examples:
              Example:
                value:
                  errors:
                  - Amount must be greater than 0
    operationId: createSubscriptionGroupPrepayment
    description: A prepayment can be added for a subscription group identified by
      the group's `uid`. This endpoint requires a `amount`, `details`, `method`, and
      `memo`. On success, the prepayment will be added to the group's prepayment balance.
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              prepayment:
                type: object
                required:
                - amount
                - details
                - memo
                - method
                properties:
                  amount:
                    type: integer
                  details:
                    type: string
                  memo:
                    type: string
                  method:
                    type: string
                    enum:
                    - check
                    - cash
                    - money_order
                    - ach
                    - paypal_account
                    - other
            required:
            - prepayment
"/subscription_groups/{uid}/service_credits.json":
  parameters:
  - schema:
      type: string
    name: uid
    in: path
    required: true
    description: The uid of the subscription group
  post:
    summary: Issue Service Credit
    tags:
    - Subscription Group Invoice Account
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              type: object
              properties:
                service_credit:
                  "$ref": "#/components/schemas/Service-Credit"
            examples:
              Example:
                value:
                  id: 101
                  amount_in_cents: 1000
                  ending_balance_in_cents: 2000
                  entry_type: Credit
                  memo: Credit to group account
      '422':
        description: Unprocessable Entity (WebDAV)
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: array
                  items:
                    type: string
            examples:
              Example:
                value:
                  errors:
                  - Amount must be greater than 0
    operationId: issueSubscriptionGroupServiceCredits
    description: Credit can be issued for a subscription group identified by the group's
      `uid`. Credit will be added to the group in the amount specified in the request
      body. The credit will be applied to group member invoices as they are generated.
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              service_credit:
                type: object
                required:
                - amount
                - memo
                properties:
                  amount:
                    type: integer
                  memo:
                    type: string
            required:
            - service_credit
          examples:
            Example:
              value:
                service_credit:
                  amount: 10
                  memo: Credit the group account
"/subscription_groups/{uid}/service_credit_deductions.json":
  parameters:
  - schema:
      type: string
    name: uid
    in: path
    required: true
    description: The uid of the subscription group
  post:
    summary: Deduct Service Credit
    tags:
    - Subscription Group Invoice Account
    responses:
      '201':
        description: Created
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/Service-Credit"
            examples:
              Example:
                value:
                  id: 100
                  amount_in_cents: 1000
                  ending_balance_in_cents: 0
                  entry_type: Debit
                  memo: Debit from group account
      '422':
        description: Unprocessable Entity (WebDAV)
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: array
                  items:
                    type: string
            examples:
              Example:
                value:
                  errors:
                  - Amount must be greater than 0
    operationId: deductSubscriptionGroupServiceCredits
    description: Credit can be deducted for a subscription group identified by the
      group's `uid`. Credit will be deducted from the group in the amount specified
      in the request body.
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              deduction:
                type: object
                required:
                - amount
                - memo
                properties:
                  amount:
                    type:
                    - string
                    - number
                  memo:
                    type: string
            required:
            - deduction
          examples:
            Example:
              value:
                deduction:
                  amount: 10
                  memo: Deduct from group account
"/subscription_groups/{uid}/payment_profiles/{payment_profile_id}/change_payment_profile.json":
  parameters:
  - schema:
      type: integer
    name: uid
    in: path
    required: true
    description: The Chargify uid of the subscription's group
  - schema:
      type: integer
    name: payment_profile_id
    in: path
    required: true
    description: The Chargify id of the payment profile
  post:
    summary: Change Subscription Group Default Payment Profile
    tags:
    - Payment Profiles
    responses:
      '201':
        description: Created
        content:
          application/json:
            schema:
              type: object
              properties:
                payment_profile:
                  "$ref": "../models/Payment-Profile.yaml"
            examples:
              Example:
                value:
                  payment_profile:
                    id: 10211899
                    first_name: Amelia
                    last_name: Example
                    masked_card_number: XXXX-XXXX-XXXX-1
                    card_type: bogus
                    expiration_month: 2
                    expiration_year: 2018
                    customer_id: 14399371
                    current_vault: bogus
                    vault_token: '1'
                    billing_address: ''
                    billing_city: ''
                    billing_state: ''
                    billing_zip: ''
                    billing_country: ''
                    customer_vault_token:
                    billing_address_2: ''
                    payment_type: credit_card
                    site_gateway_setting_id: 1
                    gateway_handle:
      '422':
        description: Unprocessable Entity (WebDAV)
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: array
                  items:
                    type: string
            examples:
              Example:
                value:
                  errors:
                  - This is already the current payment profile
    operationId: updateSubscriptionGroupDefaultPaymentProfile
    description: |-
      This will change the default payment profile on the subscription group to the existing payment profile with the id specified.

      You must elect to change the existing payment profile to a new payment profile ID in order to receive a satisfactory response from this endpoint.

      The new payment profile must belong to the subscription group's customer, otherwise you will receive an error.
"/subscription_groups/{subscription_group_uid}/proforma_invoices.json":
  parameters:
  - schema:
      type: integer
    name: subscription_group_uid
    in: path
    required: true
    description: The Chargify uid of the subscription group
  post:
    summary: Create Consolidated Proforma Invoices
    tags:
    - Proforma Invoices
    responses:
      '201':
        description: Created
      '422':
        description: Unprocessable Entity (WebDAV)
        content:
          application/json:
            schema:
              type: object
              properties:
                errors:
                  type: array
                  items:
                    type: string
            examples:
              Example:
                value:
                  errors:
                  - Consolidated proforma invoice generation already in progress
    operationId: createConsolidatedProformaInvoice
    description: |-
      This endpoint will trigger the creation of a consolidated proforma invoice asynchronously. It will return a 201 with no message, or a 422 with any errors. To find and view the new consolidated proforma invoice, you may poll the subscription group listing for proforma invoices; only one consolidated proforma invoice may be created per group at a time.

      If the information becomes outdated, simply void the old consolidated proforma invoice and generate a new one.

      ## Restrictions

      Proforma invoices are only available on Relationship Invoicing sites. To create a proforma invoice, the subscription must not be prepaid, and must be in a live state.
  get:
    summary: List Subscription Group Proforma Invoices
    tags:
    - Proforma Invoices
    operationId: listSubscriptionGroupProformaInvoices
    responses:
      '200':
        description: OK
        content:
          application/json:
            schema:
              "$ref": "#/components/schemas/Proforma-Invoice"
      '403':
        description: Forbidden
      '404':
        description: Not Found
    description: |
      Only proforma invoices with a `consolidation_level` of parent are returned.

      By default, proforma invoices returned on the index will only include totals, not detailed breakdowns for `line_items`, `discounts`, `taxes`, `credits`, `payments`, `custom_fields`. To include breakdowns, pass the specific field as a key in the query with a value set to true.
